@font-face {
  font-family: "JetBrainsMonoNL";
  src: local("JetBrains Mono"), local("JetBrainsMono");
}

:root {
  --bg: #05060a;
  --grid: #0aff9d;
  --cyan: #00e7ff;
  --green: #00ff99;
  --red: #ff2e63;
  --panel: rgba(0, 255, 153, 0.06);
  --panel-border: rgba(0, 231, 255, 0.4);
  --glow: 0 0 12px rgba(0, 255, 153, 0.6), 0 0 30px rgba(0, 231, 255, 0.3);
}

* { box-sizing: border-box; }
html, body { height: 100%; margin: 0; background: var(--bg); color: #ccffe8; font-family: "JetBrainsMonoNL", Consolas, monospace; }

#hud {
  position: fixed; top: 0; left: 0; right: 0; padding: 10px 16px; display: flex; align-items: center; gap: 16px; z-index: 20;
}
.logo { color: var(--green); text-shadow: var(--glow); letter-spacing: 2px; font-weight: 900; }
.stats { margin-left: auto; display: flex; gap: 16px; color: var(--cyan); }
.legend { opacity: 0.8; font-size: 12px; }

#world { display: block; width: 100vw; height: 100vh; }

/* Holographic Panel */
#ui-overlay { position: fixed; inset: 0; display: grid; place-items: center; z-index: 50; }
#ui-overlay.hidden { display: none; }
.panel { width: min(920px, 90vw); background: var(--panel); border: 1px solid var(--panel-border); backdrop-filter: blur(6px); box-shadow: var(--glow); border-radius: 12px; overflow: hidden; }
.panel-header { display: flex; align-items: center; gap: 12px; padding: 10px 12px; border-bottom: 1px solid var(--panel-border); background: linear-gradient(180deg, rgba(0,231,255,0.08), rgba(0,0,0,0)); }
.stage-title { color: var(--green); font-weight: 700; text-shadow: var(--glow); }
.panel-tabs { margin-left: auto; display: flex; gap: 8px; }
.panel-tabs .tab-btn { background: transparent; border: 1px solid var(--panel-border); color: #aaffee; padding: 6px 10px; border-radius: 6px; cursor: pointer; }
.panel-tabs .tab-btn.active { background: rgba(0,231,255,0.08); box-shadow: var(--glow); }
#closePanel { background: transparent; border: 1px solid var(--panel-border); color: #aaffee; padding: 6px 10px; border-radius: 6px; cursor: pointer; }
.panel-content { padding: 16px; max-height: 58vh; overflow: auto; }
.tab { display: none; }
.tab.active { display: block; }
.monospace { font-family: "JetBrainsMonoNL", Consolas, monospace; white-space: pre-wrap; }
.quiz-actions,.minigame-actions { display: flex; align-items: center; gap: 12px; margin-top: 12px; }
.primary { background: rgba(0, 231, 255, 0.12); border: 1px solid var(--panel-border); color: #aaffee; padding: 8px 12px; border-radius: 6px; cursor: pointer; }
.success { background: rgba(0, 255, 153, 0.12); border: 1px solid var(--panel-border); color: var(--green); padding: 8px 12px; border-radius: 6px; cursor: pointer; }
.feedback { min-height: 20px; }
.panel-footer { padding: 10px 12px; border-top: 1px solid var(--panel-border); background: linear-gradient(0deg, rgba(0,231,255,0.08), rgba(0,0,0,0)); display: flex; justify-content: flex-end; }

/* Toast */
.toast { position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%); background: rgba(0,0,0,0.6); border: 1px solid var(--panel-border); padding: 10px 16px; border-radius: 8px; color: #aaffee; box-shadow: var(--glow); z-index: 100; }
.toast.hidden { display: none; }

/* 3D Stickman via CSS elements */
.stickman { position: absolute; width: 4px; height: 4px; transform-style: preserve-3d; }
.stickman .part { position: absolute; background: var(--green); box-shadow: 0 0 8px var(--green), 0 0 16px var(--cyan); border-radius: 2px; }
.stickman .head { width: 10px; height: 10px; border-radius: 50%; top: -18px; left: -3px; }
.stickman .body { width: 4px; height: 18px; top: -8px; left: 0; }
.stickman .arm { width: 3px; height: 14px; top: -6px; }
.stickman .arm.left { left: -6px; transform-origin: top right; }
.stickman .arm.right { left: 7px; transform-origin: top left; }
.stickman .leg { width: 4px; height: 16px; top: 8px; left: 0; transform-origin: top center; }

/* Minigame generic root */
.minigame-root { min-height: 220px; border: 1px dashed rgba(0,231,255,0.3); padding: 12px; border-radius: 8px; }

/* Glow helpers */
.glow-green { text-shadow: 0 0 6px rgba(0,255,153,0.9), 0 0 24px rgba(0,231,255,0.6); color: #dffff4; }
.glow-red { text-shadow: 0 0 6px rgba(255,46,99,0.9), 0 0 24px rgba(255,46,99,0.5); color: #ffe7ef; }

/* Buttons hover */
button:hover { filter: brightness(1.1) saturate(1.1); box-shadow: var(--glow); }

/* Scrollbar styling */
.panel-content::-webkit-scrollbar { width: 10px; }
.panel-content::-webkit-scrollbar-thumb { background: rgba(0,231,255,0.25); border-radius: 6px; }


/* Lesson + Console split layout */
.lesson-split { display: grid; grid-template-columns: 1.2fr 0.8fr; gap: 16px; align-items: start; }
.lesson-main { min-width: 0; }
.lesson-content { white-space: pre-wrap; }

.python-console { border: 1px solid var(--panel-border); border-radius: 8px; padding: 10px; background: rgba(0,0,0,0.2); box-shadow: inset 0 0 12px rgba(0,231,255,0.15); }
.console-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: 8px; }
.console-title { color: var(--cyan); font-weight: 700; }
.console-output { min-height: 180px; max-height: 260px; overflow: auto; background: rgba(0,0,0,0.25); border: 1px dashed rgba(0,231,255,0.3); border-radius: 6px; padding: 8px; margin-bottom: 8px; }
.console-input-area { display: block; }
.console-input-container { border: 1px solid var(--panel-border); border-radius: 6px; background: rgba(0, 231, 255, 0.08); overflow: hidden; }
.console-input-header { display: flex; align-items: center; justify-content: space-between; padding: 6px 8px; background: rgba(0, 0, 0, 0.15); border-bottom: 1px solid var(--panel-border); }
.console-input-actions { display: flex; gap: 6px; }
.console-input-actions button { padding: 4px 8px; font-size: 11px; }
.console-input { width: 100%; background: transparent; border: none; color: #aaffee; padding: 8px; font-family: "JetBrainsMonoNL", Consolas, monospace; resize: vertical; min-height: 80px; }
.console-input:focus { outline: none; }
.console-prompt { opacity: 0.9; color: var(--green); }
.console-hints { margin-top: 6px; opacity: 0.85; font-size: 12px; }

@media (max-width: 900px){
  .lesson-split { grid-template-columns: 1fr; }
}